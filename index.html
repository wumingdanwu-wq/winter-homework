<html lang="zh-CN"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImQ1OTQzZDdlNWZhYTIxZjcyOTJjMzI3MGY3ZDBjNWJmNDE5MjJmOTciLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIxMTA3NDg2NjgwMzE1ODQxMTM1OSIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjXzAxYWU2OTY0NjAzN2Y3NTRfaW5kZXguaHRtbC0zMTIifSwiZXhwIjoxNzcwNDU5MTQxLCJpYXQiOjE3NzA0NTU1NDEsImFsZyI6IlJTMjU2In0.D5bA6WLQiAg9XooEPI2wIt0ZeDuTxGs13SqJNlU7tu796OG9fAvLHMGo7y4_Y7gLspxO3J7P7To3kjN2ghvmFu4Y9YMTH4kuOeHcuw1QricLnsNGjgrn15SQTjdeYzDglnZcfOoFQ7EI2msjj_gPZcC-f3oKC7Dm2LKpRX4PEMayRGhoeKeQ2p1_gn0qgF6zABYjZIY6Yv4Pkvdzkty7EhWEBp3qqeMmMBxLMgYRsv6kJZEXECRMPc2o9QJl_NRirevYutcpf1M265JyhLOxDrIq07HAAaymBDZRoGxJayC5itPv3yj3n3KhLJD4YEn_oE0r9VQ_ILSn9WeehrJ79g","c_01ae69646037f754_index.html-312")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
    <title>2026寒假作业闯关助手 | 多多扬扬版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,600,1,0" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&amp;display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/canvas-confetti/1.6.0/confetti.browser.min.js" crossorigin="anonymous"></script>
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f8fafc; -webkit-tap-highlight-color: transparent; }
        
        .header-overlay {
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.1));
        }
        
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .click-anim:active { transform: scale(0.95); transition: transform 0.1s; }

        /* 强调动画 - 用于保存按钮提醒 */
        @keyframes pulse-ring {
            0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
        }
        .save-pulse {
            animation: pulse-ring 2s infinite;
        }
        
        /* 强制伪全屏模式 - 纯CSS实现，稳定可靠 */
        body.force-fullscreen-active {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 999999 !important;
            background-color: #f8fafc !important;
            overflow-y: auto !important;
            margin: 0 !important;
            padding-bottom: 40px !important;
        }
        
        /* 全屏时顶部栏始终置顶 */
        body.force-fullscreen-active .top-bar {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000000;
        }

        /* Toast 动画 */
        @keyframes slide-in-down {
            from { transform: translate(-50%, -100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }
        @keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .toast-enter { animation: slide-in-down 0.3s ease-out forwards; }
        .toast-exit { animation: fade-out 0.3s ease-in forwards; }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.-top-1{top:-0.25rem}.bottom-0{bottom:0px}.left-0{left:0px}.left-1\/2{left:50%}.right-0{right:0px}.right-4{right:1rem}.right-6{right:1.5rem}.top-4{top:1rem}.top-6{top:1.5rem}.top-full{top:100%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.z-\[60\]{z-index:60}.mx-1{margin-left:0.25rem;margin-right:0.25rem}.mx-auto{margin-left:auto;margin-right:auto}.-mt-4{margin-top:-1rem}.mb-0\.5{margin-bottom:0.125rem}.mb-1{margin-bottom:0.25rem}.mb-3{margin-bottom:0.75rem}.mb-6{margin-bottom:1.5rem}.mr-2{margin-right:0.5rem}.mt-0\.5{margin-top:0.125rem}.mt-3{margin-top:0.75rem}.mt-auto{margin-top:auto}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.ml-auto{margin-left:auto}.mr-3{margin-right:0.75rem}.mt-1{margin-top:0.25rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-12{height:3rem}.h-2{height:0.5rem}.h-36{height:9rem}.h-full{height:100%}.h-1{height:0.25rem}.h-14{height:3.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-1\.5{height:0.375rem}.max-h-\[350px\]{max-height:350px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-2{width:0.5rem}.w-40{width:10rem}.w-full{width:100%}.w-12{width:3rem}.w-14{width:3.5rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-1\.5{width:0.375rem}.min-w-0{min-width:0px}.max-w-5xl{max-width:64rem}.max-w-6xl{max-width:72rem}.max-w-sm{max-width:24rem}.max-w-\[50\%\]{max-width:50%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-2{--tw-translate-y:0.5rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate:45deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-105{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.select-none{-webkit-user-select:none;user-select:none}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-6{gap:1.5rem}.space-y-1 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.25rem * var(--tw-space-y-reverse))}.space-y-2\.5 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.625rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.625rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.scroll-smooth{scroll-behavior:smooth}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.rounded{border-radius:0.25rem}.rounded-t-\[2\.5rem\]{border-top-left-radius:2.5rem;border-top-right-radius:2.5rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-r{border-right-width:1px}.border-blue-100{--tw-border-opacity:1;border-color:rgb(219 234 254 / var(--tw-border-opacity, 1))}.border-blue-400\/50{border-color:rgb(96 165 250 / 0.5)}.border-green-100{--tw-border-opacity:1;border-color:rgb(220 252 231 / var(--tw-border-opacity, 1))}.border-indigo-100{--tw-border-opacity:1;border-color:rgb(224 231 255 / var(--tw-border-opacity, 1))}.border-slate-100{--tw-border-opacity:1;border-color:rgb(241 245 249 / var(--tw-border-opacity, 1))}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-white\/20{border-color:rgb(255 255 255 / 0.2)}.border-white\/30{border-color:rgb(255 255 255 / 0.3)}.border-purple-100{--tw-border-opacity:1;border-color:rgb(243 232 255 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity:1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.border-green-500{--tw-border-opacity:1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.border-orange-200{--tw-border-opacity:1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-orange-500{--tw-border-opacity:1;border-color:rgb(249 115 22 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity:1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.bg-\[\#f8fafc\]{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-black\/30{background-color:rgb(0 0 0 / 0.3)}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity:1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-green-500{--tw-bg-opacity:1;background-color:rgb(34 197 94 / var(--tw-bg-opacity, 1))}.bg-orange-100{--tw-bg-opacity:1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-orange-400{--tw-bg-opacity:1;background-color:rgb(251 146 60 / var(--tw-bg-opacity, 1))}.bg-slate-200{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.bg-slate-50\/50{background-color:rgb(248 250 252 / 0.5)}.bg-slate-800{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/20{background-color:rgb(255 255 255 / 0.2)}.bg-white\/90{background-color:rgb(255 255 255 / 0.9)}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-purple-50{--tw-bg-opacity:1;background-color:rgb(250 245 255 / var(--tw-bg-opacity, 1))}.bg-purple-500{--tw-bg-opacity:1;background-color:rgb(168 85 247 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-500{--tw-bg-opacity:1;background-color:rgb(239 68 68 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-green-600{--tw-bg-opacity:1;background-color:rgb(22 163 74 / var(--tw-bg-opacity, 1))}.bg-orange-50{--tw-bg-opacity:1;background-color:rgb(255 247 237 / var(--tw-bg-opacity, 1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-orange-500{--tw-bg-opacity:1;background-color:rgb(249 115 22 / var(--tw-bg-opacity, 1))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-t{background-image:linear-gradient(to top, var(--tw-gradient-stops))}.from-black\/70{--tw-gradient-from:rgb(0 0 0 / 0.7) var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-300{--tw-gradient-from:#86efac var(--tw-gradient-from-position);--tw-gradient-to:rgb(134 239 172 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-indigo-50{--tw-gradient-from:#eef2ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(238 242 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.via-transparent{--tw-gradient-to:rgb(0 0 0 / 0)  var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), transparent var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-blue-300{--tw-gradient-to:#93c5fd var(--tw-gradient-to-position)}.to-blue-50{--tw-gradient-to:#eff6ff var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to:transparent var(--tw-gradient-to-position)}.bg-cover{background-size:cover}.bg-center{background-position:center}.object-cover{object-fit:cover}.p-1\.5{padding:0.375rem}.p-2{padding:0.5rem}.p-2\.5{padding:0.625rem}.p-4{padding:1rem}.p-1{padding:0.25rem}.p-3{padding:0.75rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-0\.5{padding-top:0.125rem;padding-bottom:0.125rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-1{padding-bottom:0.25rem}.pb-12{padding-bottom:3rem}.pb-32{padding-bottom:8rem}.pl-4{padding-left:1rem}.pl-9{padding-left:2.25rem}.text-left{text-align:left}.text-center{text-align:center}.font-serif{font-family:ui-serif, Georgia, Cambria, "Times New Roman", Times, serif}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}.text-\[10px\]{font-size:10px}.text-\[16px\]{font-size:16px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-2xl{font-size:1.5rem;line-height:2rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-medium{font-weight:500}.uppercase{text-transform:uppercase}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.tracking-tight{letter-spacing:-0.025em}.tracking-widest{letter-spacing:0.1em}.tracking-wider{letter-spacing:0.05em}.text-blue-500{--tw-text-opacity:1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity:1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-indigo-800{--tw-text-opacity:1;color:rgb(55 48 163 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-600{--tw-text-opacity:1;color:rgb(234 88 12 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-slate-900{--tw-text-opacity:1;color:rgb(15 23 42 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/90{color:rgb(255 255 255 / 0.9)}.text-yellow-100{--tw-text-opacity:1;color:rgb(254 249 195 / var(--tw-text-opacity, 1))}.text-yellow-300{--tw-text-opacity:1;color:rgb(253 224 71 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity:1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-purple-600{--tw-text-opacity:1;color:rgb(147 51 234 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity:1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-green-700{--tw-text-opacity:1;color:rgb(21 128 61 / var(--tw-text-opacity, 1))}.line-through{-webkit-text-decoration-line:line-through;text-decoration-line:line-through}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-60{opacity:0.6}.opacity-80{opacity:0.8}.opacity-90{opacity:0.9}.opacity-70{opacity:0.7}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.ring-blue-400{--tw-ring-opacity:1;--tw-ring-color:rgb(96 165 250 / var(--tw-ring-opacity, 1))}.ring-white\/30{--tw-ring-color:rgb(255 255 255 / 0.3)}.ring-offset-1{--tw-ring-offset-width:1px}.drop-shadow-lg{--tw-drop-shadow:drop-shadow(0 10px 8px rgb(0 0 0 / 0.04)) drop-shadow(0 4px 3px rgb(0 0 0 / 0.1));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-md{--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.duration-500{transition-duration:500ms}.duration-700{transition-duration:700ms}.duration-200{transition-duration:200ms}.ease-out{transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-blue-400:hover{--tw-border-opacity:1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-50:hover{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/10:hover{background-color:rgb(255 255 255 / 0.1)}.hover\:opacity-100:hover{opacity:1}.hover\:shadow-sm:hover{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.active\:scale-90:active{--tw-scale-x:.9;--tw-scale-y:.9;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:scale-110{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@media (min-width: 768px){.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:flex-row{flex-direction:row}.md\:justify-start{justify-content:flex-start}.md\:text-left{text-align:left}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}}@media (min-width: 1024px){.lg\:col-span-4{grid-column:span 4 / span 4}.lg\:col-span-8{grid-column:span 8 / span 8}.lg\:grid-cols-12{grid-template-columns:repeat(12, minmax(0, 1fr))}}</style></head>
<body id="app-body" class="min-h-screen text-slate-800 transition-colors duration-300 pb-32">

    <input type="file" id="file-input" class="hidden" accept=".html" onchange="handleFileLoad(event)">

    <!-- Toast 容器 -->
    <div id="toast-container" class="fixed top-6 left-1/2 -translate-x-1/2 z-[60] flex flex-col gap-2 pointer-events-none w-full max-w-sm px-4"></div>

    <!-- 顶部工具栏 -->
    <div class="fixed top-4 right-4 z-50 flex items-center gap-2 no-print top-bar pl-4">
        
        <!-- 保存按钮及提示气泡 -->
        <div class="relative">
            <div id="save-hint" class="absolute top-full right-0 mt-3 bg-slate-800 text-white text-[10px] px-3 py-1.5 rounded-lg shadow-xl transition-all duration-500 pointer-events-none whitespace-nowrap z-50 opacity-0 translate-y-2">
                <div class="absolute -top-1 right-6 w-2 h-2 bg-slate-800 rotate-45"></div>
                记得点这里保存哦！👆
            </div>
            <button id="top-save-btn" class="bg-blue-600 text-white px-4 py-2 rounded-full shadow-lg hover:bg-blue-700 active:scale-95 transition-all flex items-center gap-2 mr-2 border border-blue-400/50" onclick="downloadProgress()" title="保存进度">
                <span class="material-symbols-rounded text-lg">save</span>
                <span class="font-bold text-sm">保存进度</span>
            </button>
        </div>

        <!-- 读取按钮 -->
        <button class="bg-white/90 backdrop-blur p-2.5 rounded-full shadow-lg hover:scale-105 active:scale-95 text-slate-600 transition-all border border-slate-200" onclick="triggerLoad()" title="读取存档">
            <span class="material-symbols-rounded">folder_open</span>
        </button>
        
        <!-- 全屏按钮 -->
        <button class="bg-white/90 backdrop-blur p-2.5 rounded-full shadow-lg hover:scale-105 active:scale-95 text-slate-600 transition-all border border-slate-200" onclick="toggleFullScreen()" title="全屏专注模式">
            <span class="material-symbols-rounded" id="fs-icon">fullscreen</span>
        </button>
    </div>

    <!-- 头部区域 -->
    <header id="app-header" class="text-white shadow-xl relative overflow-hidden pb-12 transition-all duration-500 bg-cover bg-center" style="background-image: url(&quot;https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&amp;w=1600&amp;auto=format&amp;fit=crop&quot;);">
        <div class="absolute inset-0 header-overlay"></div>
        <div class="absolute bottom-0 left-0 right-0 h-12 bg-[#f8fafc] rounded-t-[2.5rem]"></div>
        
        <div class="max-w-5xl mx-auto px-6 py-8 relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <!-- 标题 -->
                <div class="text-center md:text-left">
                    <h1 class="text-3xl md:text-4xl font-black tracking-tight flex items-center gap-3 justify-center md:justify-start drop-shadow-md text-white">
                        <span class="material-symbols-rounded text-yellow-300 text-5xl">rocket_launch</span>
                        <span class="drop-shadow-lg">寒假作业大闯关</span>
                    </h1>
                    <div class="mt-3 flex items-center gap-3 justify-center md:justify-start text-sm font-medium">
                        <span class="bg-black/30 px-3 py-1 rounded-full backdrop-blur-md flex items-center gap-1 border border-white/20">
                            <span class="material-symbols-rounded text-base">today</span>
                            <span id="current-date-display">2月7日 周六</span>
                        </span>
                        <span class="bg-black/30 px-3 py-1 rounded-full backdrop-blur-md flex items-center gap-1 text-yellow-100 border border-white/20">
                            <span class="material-symbols-rounded text-base">timer</span>
                            距开学 <span class="font-bold text-yellow-300 text-lg mx-1" id="days-left">23</span> 天
                        </span>
                    </div>
                </div>

                <!-- 角色切换 -->
                <div class="bg-white/20 p-1.5 rounded-2xl backdrop-blur-md flex shadow-inner border border-white/30">
                    <!-- 哥哥 -->
                    <button class="relative flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 w-40 justify-start overflow-hidden group text-white/90 hover:bg-white/10 opacity-80 hover:opacity-100" id="tab-duoduo" onclick="switchProfile('duoduo')">
                        <div class="relative w-10 h-10 flex-shrink-0">
                            <!-- 哥哥头像：蓝色卫衣，中学生 -->
                            <img id="avatar-duoduo" src="https://api.dicebear.com/7.x/micah/svg?seed=Arthur" class="w-full h-full rounded-full border-2 border-blue-100 object-cover bg-blue-50" onerror="this.src='https://api.dicebear.com/7.x/micah/svg?seed=Arthur'">
                        </div>
                        <div class="text-left z-10 leading-none">
                            <div class="font-bold text-sm">哥哥（多多）</div>
                            <div class="text-[10px] opacity-60 mt-0.5">六年级</div>
                        </div>
                    </button>
                    <!-- 弟弟 -->
                    <button class="relative flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 w-40 justify-start overflow-hidden group bg-white text-slate-900 shadow-lg scale-100 opacity-100 ring-2 ring-white/30" id="tab-yangyang" onclick="switchProfile('yangyang')">
                        <div class="relative w-10 h-10 flex-shrink-0">
                            <!-- 弟弟头像：黄色卫衣，戴眼镜 -->
                            <img id="avatar-yangyang" src="https://api.dicebear.com/7.x/micah/svg?seed=Flynn" class="w-full h-full rounded-full border-2 border-green-100 object-cover bg-green-50" onerror="this.src='https://api.dicebear.com/7.x/micah/svg?seed=Flynn'">
                        </div>
                        <div class="text-left z-10 leading-none">
                            <div class="font-bold text-sm">弟弟（扬扬）</div>
                            <div class="text-[10px] opacity-80 mt-0.5">二年级</div>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- 主体内容 -->
    <main class="max-w-6xl mx-auto px-4 -mt-4 relative z-20">
        
        <!-- 日历导航 -->
        <section class="bg-white rounded-2xl shadow-sm border border-slate-100 p-4 mb-6">
            <div class="flex justify-between items-center mb-3 px-1">
                <h3 class="font-bold text-slate-700 flex items-center gap-2 text-sm">
                    <span class="material-symbols-rounded text-blue-500">calendar_month</span>
                    打卡日历
                </h3>
                <div class="flex gap-3 text-[10px] font-bold text-slate-400 uppercase">
                    <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-green-500"></span> 完美</span>
                    <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-orange-400"></span> 努力</span>
                    <span class="flex items-center gap-1"><span class="w-2 h-2 rounded-full bg-slate-200"></span> 待办</span>
                </div>
            </div>
            <div class="flex gap-2 overflow-x-auto hide-scrollbar pb-1 px-1 scroll-smooth" id="calendar-strip"><button id="cal-2026-01-31" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">1.30</span></button><button id="cal-2026-02-01" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-green-50 border-green-200 text-green-700 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">1.31</span><div class="w-1.5 h-1.5 rounded-full bg-green-500 mt-1"></div></button><button id="cal-2026-02-02" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-orange-50 border-orange-200 text-orange-700 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.1</span><div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div></button><button id="cal-2026-02-03" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.2</span></button><button id="cal-2026-02-04" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-orange-50 border-orange-200 text-orange-700 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.3</span><div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div></button><button id="cal-2026-02-05" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-orange-50 border-orange-200 text-orange-700 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.4</span><div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div></button><button id="cal-2026-02-06" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-orange-50 border-orange-200 text-orange-700 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.5</span><div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div></button><button id="cal-2026-02-07" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-orange-50 border-orange-200 text-orange-700 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.6</span><div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div></button><button id="cal-2026-02-08" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-orange-50 border-orange-200 text-orange-700 ring-2 ring-blue-400 ring-offset-1 scale-105 z-10 shadow-md font-bold"><span class="text-[10px] leading-none">2.7</span><div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div></button><button id="cal-2026-02-09" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.8</span></button><button id="cal-2026-02-10" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.9</span></button><button id="cal-2026-02-11" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.10</span></button><button id="cal-2026-02-12" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.11</span></button><button id="cal-2026-02-13" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.12</span></button><button id="cal-2026-02-14" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.13</span></button><button id="cal-2026-02-15" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.14</span></button><button id="cal-2026-02-16" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.15</span></button><button id="cal-2026-02-17" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.16</span></button><button id="cal-2026-02-18" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.17</span></button><button id="cal-2026-02-19" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.18</span></button><button id="cal-2026-02-20" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.19</span></button><button id="cal-2026-02-21" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.20</span></button><button id="cal-2026-02-22" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.21</span></button><button id="cal-2026-02-23" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.22</span></button><button id="cal-2026-02-24" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.23</span></button><button id="cal-2026-02-25" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.24</span></button><button id="cal-2026-02-26" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.25</span></button><button id="cal-2026-02-27" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.26</span></button><button id="cal-2026-02-28" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.27</span></button><button id="cal-2026-03-01" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">2.28</span></button><button id="cal-2026-03-02" class="flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 bg-white border-slate-100 text-slate-400 opacity-80 hover:opacity-100 hover:scale-105"><span class="text-[10px] leading-none">3.1</span></button></div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <!-- 左侧：每日任务 -->
            <div class="lg:col-span-8 space-y-5">
                <!-- 日期切换 -->
                <div class="flex items-center justify-between bg-white px-4 py-3 rounded-2xl shadow-sm border border-slate-100">
                    <button class="w-10 h-10 rounded-full hover:bg-slate-50 flex items-center justify-center text-slate-400 active:scale-90 transition" onclick="changeDate(-1)">
                        <span class="material-symbols-rounded">arrow_back_ios_new</span>
                    </button>
                    <div class="text-center">
                        <div class="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-0.5">当前查看</div>
                        <div class="text-xl font-black text-slate-800 tracking-tight" id="view-date-display">2月7日 周六</div>
                    </div>
                    <button class="w-10 h-10 rounded-full hover:bg-slate-50 flex items-center justify-center text-slate-400 active:scale-90 transition" onclick="changeDate(1)">
                        <span class="material-symbols-rounded">arrow_forward_ios</span>
                    </button>
                </div>

                <!-- 任务列表容器 -->
                <div class="space-y-4" id="tasks-container">
                <div class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden mb-4" id="sub-card-chn">
                    <div class="flex items-stretch">
                        <div class="w-14 bg-red-50 text-red-600 flex flex-col items-center justify-center border-r border-red-100">
                            <span class="material-symbols-rounded text-2xl mb-1">auto_stories</span>
                            <span class="text-xs font-bold writing-vertical-lr tracking-widest">语文</span>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                
                                    <div id="btn-y_chn_read" onclick="toggleDaily('y_chn_read')" class="click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-slate-50 border-slate-200 opacity-70">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-y_chn_read" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-green-500 bg-green-500 text-white"><span class="material-symbols-rounded text-sm font-bold">check</span></div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-y_chn_read" class="text-sm font-bold truncate line-through text-slate-400">阅读 (30分钟)</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">注音童话/寓言</span>
                                            <span id="badge-y_chn_read" data-target="21" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: 7/21</span>
                                        </div>
                                    </div>
                                    <div id="btn-y_chn_rec" onclick="toggleDaily('y_chn_rec')" class="click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-slate-50 border-slate-200 opacity-70">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-y_chn_rec" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-green-500 bg-green-500 text-white"><span class="material-symbols-rounded text-sm font-bold">check</span></div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-y_chn_rec" class="text-sm font-bold truncate line-through text-slate-400">诵读 (15分钟)</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">背古诗/课文</span>
                                            <span id="badge-y_chn_rec" data-target="21" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: 7/21</span>
                                        </div>
                                    </div>
                                    <div id="btn-y_chn_wri" onclick="toggleDaily('y_chn_wri')" class="click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-slate-50 border-slate-200 opacity-70">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-y_chn_wri" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-green-500 bg-green-500 text-white"><span class="material-symbols-rounded text-sm font-bold">check</span></div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-y_chn_wri" class="text-sm font-bold truncate line-through text-slate-400">练字 (1-2页)</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">生字/组词</span>
                                            <span id="badge-y_chn_wri" data-target="21" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: 7/21</span>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <div class="h-1 w-full bg-slate-100">
                        <div id="bar-chn" class="h-full bg-red-500 transition-all duration-500 ease-out" style="width: 100%;"></div>
                    </div>
                </div>
                <div class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden mb-4" id="sub-card-mat">
                    <div class="flex items-stretch">
                        <div class="w-14 bg-blue-50 text-blue-600 flex flex-col items-center justify-center border-r border-blue-100">
                            <span class="material-symbols-rounded text-2xl mb-1">schedule</span>
                            <span class="text-xs font-bold writing-vertical-lr tracking-widest">数学</span>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                
                                    <div id="btn-y_mat_num" onclick="toggleDaily('y_mat_num')" class="click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-white border-slate-200 hover:border-blue-400 hover:shadow-sm cursor-pointer">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-y_mat_num" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-slate-300 bg-white">
                                                
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-y_mat_num" class="text-sm font-bold truncate text-slate-700">识字与书写</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">数字书写/生活识字</span>
                                            <span id="badge-y_mat_num" data-target="21" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: 6/21</span>
                                        </div>
                                    </div>
                                    <div id="btn-y_mat_clk" onclick="toggleDaily('y_mat_clk')" class="click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-slate-50 border-slate-200 opacity-70">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-y_mat_clk" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-green-500 bg-green-500 text-white"><span class="material-symbols-rounded text-sm font-bold">check</span></div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-y_mat_clk" class="text-sm font-bold truncate line-through text-slate-400">生活数学</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">看钟表说时间</span>
                                            <span id="badge-y_mat_clk" data-target="21" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: 7/21</span>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <div class="h-1 w-full bg-slate-100">
                        <div id="bar-mat" class="h-full bg-blue-500 transition-all duration-500 ease-out" style="width: 50%;"></div>
                    </div>
                </div>
                <div class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden mb-4" id="sub-card-pe">
                    <div class="flex items-stretch">
                        <div class="w-14 bg-green-50 text-green-600 flex flex-col items-center justify-center border-r border-green-100">
                            <span class="material-symbols-rounded text-2xl mb-1">sports_soccer</span>
                            <span class="text-xs font-bold writing-vertical-lr tracking-widest">体育</span>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                
                                    <div id="btn-y_pe_out" onclick="toggleDaily('y_pe_out')" class="click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-white border-slate-200 hover:border-blue-400 hover:shadow-sm cursor-pointer">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-y_pe_out" class="w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-slate-300 bg-white">
                                                
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-y_pe_out" class="text-sm font-bold truncate text-slate-700">每日锻炼</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">户外活动/跑跳</span>
                                            <span id="badge-y_pe_out" data-target="21" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: 1/21</span>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <div class="h-1 w-full bg-slate-100">
                        <div id="bar-pe" class="h-full bg-green-500 transition-all duration-500 ease-out" style="width: 0%"></div>
                    </div>
                </div></div>
            </div>

            <!-- 右侧：特殊任务与寄语 -->
            <div class="lg:col-span-4 space-y-5 flex flex-col h-full">
                
                <!-- 每日寄语 -->
                <div class="relative rounded-2xl overflow-hidden h-36 shadow-sm group bg-slate-200">
                    <div id="quote-bg-fallback" class="absolute inset-0 w-full h-full bg-gradient-to-br from-green-300 to-blue-300 transition-opacity duration-300" style="opacity: 0;"></div>
                    <img id="quote-bg" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" src="https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?q=80&amp;w=1000&amp;auto=format&amp;fit=crop" alt="" style="display: block;" onload="this.style.display='block'; document.getElementById('quote-bg-fallback').style.opacity='0';" onerror="this.style.display='none'; document.getElementById('quote-bg-fallback').style.opacity='1';">
                    
                    <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-4 text-white z-10">
                        <div class="font-bold text-sm mb-1 opacity-90">每日寄语</div>
                        <p class="text-xs opacity-80 leading-relaxed font-serif" id="motivation-text">快乐学习，健康成长，每天进步一点点！</p>
                    </div>
                </div>

                <!-- 阶段挑战 -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="bg-slate-50/50 px-4 py-3 border-b border-slate-100 flex justify-between items-center backdrop-blur-sm">
                        <h3 class="font-bold text-slate-800 flex items-center gap-2 text-sm">
                            <span class="material-symbols-rounded text-orange-500">emoji_events</span>
                            阶段挑战
                        </h3>
                        <span class="text-[10px] font-bold bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full" id="challenge-progress-text">0/4</span>
                    </div>
                    <div class="max-h-[350px] overflow-y-auto p-2 space-y-1 custom-scrollbar" id="special-tasks-container">
            <div class="mb-4">
                <h4 class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1">第一阶段 (1.31-2.14)</h4>
                <div class="bg-white rounded-xl border border-slate-100 p-1 space-y-1">
                    
                        <div onclick="toggleSpecial('y_ph1_wri')" class="flex items-center p-2 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
                            <div class="w-5 h-5 rounded border flex-shrink-0 flex items-center justify-center mr-3 border-slate-300 bg-white">
                                
                            </div>
                            <span class="text-sm text-slate-700">语文：复习上册《写字表》</span>
                        </div>
                        <div onclick="toggleSpecial('y_ph1_clk')" class="flex items-center p-2 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
                            <div class="w-5 h-5 rounded border flex-shrink-0 flex items-center justify-center mr-3 border-slate-300 bg-white">
                                
                            </div>
                            <span class="text-sm text-slate-700">数学：学会“认识钟面”</span>
                        </div>
                </div>
            </div>
            <div class="mb-4">
                <h4 class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1">第二阶段 (2.15-3.1)</h4>
                <div class="bg-white rounded-xl border border-slate-100 p-1 space-y-1">
                    
                        <div onclick="toggleSpecial('y_ph2_pre')" class="flex items-center p-2 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
                            <div class="w-5 h-5 rounded border flex-shrink-0 flex items-center justify-center mr-3 border-slate-300 bg-white">
                                
                            </div>
                            <span class="text-sm text-slate-700">语文：预习下册前两单元</span>
                        </div>
                        <div onclick="toggleSpecial('y_ph2_bk')" class="flex items-center p-2 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
                            <div class="w-5 h-5 rounded border flex-shrink-0 flex items-center justify-center mr-3 border-slate-300 bg-white">
                                
                            </div>
                            <span class="text-sm text-slate-700">阅读：完成整本课外书</span>
                        </div>
                </div>
            </div></div>
                </div>

                <!-- 假期生活小贴士 -->
                <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl border border-indigo-100 p-4 mt-auto shadow-sm">
                    <h3 class="font-bold text-indigo-800 flex items-center gap-2 text-sm mb-3">
                        <span class="material-symbols-rounded">tips_and_updates</span>
                        假期生活小贴士
                    </h3>
                    <ul class="space-y-2.5">
                        <li class="flex items-start gap-2 text-xs text-slate-700">
                            <span class="material-symbols-rounded text-red-500 text-[16px] flex-shrink-0">safety_check</span>
                            <span><strong class="text-slate-900">安全第一：</strong>远离烟花爆竹，注意水电及交通安全。</span>
                        </li>
                        <li class="flex items-start gap-2 text-xs text-slate-700">
                            <span class="material-symbols-rounded text-green-500 text-[16px] flex-shrink-0">visibility</span>
                            <span><strong class="text-slate-900">视力保护：</strong>控制手机电脑使用，多做运动。</span>
                        </li>
                        <li class="flex items-start gap-2 text-xs text-slate-700">
                            <span class="material-symbols-rounded text-blue-500 text-[16px] flex-shrink-0">event_upcoming</span>
                            <span><strong class="text-slate-900">开学提醒：</strong>2026年3月2日报道，3月3日正式上课。</span>
                        </li>
                    </ul>
                </div>

            </div>

        </div>
    </main>

<script>
    let state = {
    "profile": "yangyang",
    "date": "2026-02-08",
    "duoduo": {
        "daily": {
            "2026-01-31": {
                "d_chn_note": false,
                "d_chn_recite": false,
                "d_chn_read": false,
                "d_mat_base": false,
                "d_mat_expr": false,
                "d_mat_wb": false,
                "d_mat_rev": false,
                "d_eng_lis": false,
                "d_eng_phonics": false,
                "d_eng_wri": false
            },
            "2026-02-01": {
                "d_chn_read": true,
                "d_chn_recite": true,
                "d_mat_base": true,
                "d_mat_expr": true,
                "d_mat_rev": true,
                "d_mat_wb": true,
                "d_eng_lis": true,
                "d_eng_wri": true,
                "d_eng_phonics": true,
                "d_pe_run": true
            },
            "2026-02-02": {
                "d_chn_read": true,
                "d_mat_base": true,
                "d_mat_expr": true,
                "d_mat_wb": true,
                "d_chn_note": true,
                "d_mat_rev": true,
                "d_eng_lis": true,
                "d_eng_wri": true,
                "d_eng_pre": true,
                "d_eng_phonics": true,
                "d_chn_recite": true
            },
            "2026-02-04": {
                "d_mat_base": true,
                "d_mat_expr": true,
                "d_mat_rev": true,
                "d_mat_wb": true,
                "d_chn_read": true,
                "d_eng_lis": true,
                "d_chn_recite": true,
                "d_eng_phonics": true,
                "d_eng_wri": true,
                "d_chn_note": true
            },
            "2026-02-05": {
                "d_chn_read": true,
                "d_mat_base": true,
                "d_mat_rev": true,
                "d_mat_wb": true,
                "d_mat_expr": true,
                "d_eng_lis": true,
                "d_chn_note": true,
                "d_chn_recite": true,
                "d_eng_wri": true,
                "d_eng_phonics": true
            },
            "2026-02-06": {
                "d_chn_read": true,
                "d_chn_note": true,
                "d_chn_recite": true,
                "d_mat_base": true,
                "d_mat_expr": true,
                "d_mat_rev": true,
                "d_mat_wb": true,
                "d_eng_wri": true,
                "d_eng_phonics": true,
                "d_eng_pre": true,
                "d_eng_lis": true
            },
            "2026-02-07": {
                "d_mat_base": true,
                "d_mat_expr": true,
                "d_mat_rev": true,
                "d_mat_wb": true,
                "d_chn_read": true,
                "d_eng_lis": true
            },
            "2026-02-08": {
                "d_chn_read": true,
                "d_chn_note": true,
                "d_mat_base": true,
                "d_mat_expr": true,
                "d_mat_rev": true,
                "d_eng_lis": true,
                "d_eng_wri": true,
                "d_eng_phonics": true
            }
        },
        "specials": {
            "s_ess_2": false,
            "s_ess_3": true
        }
    },
    "yangyang": {
        "daily": {
            "2026-01-31": {
                "y_chn_rec": false,
                "y_chn_read": false,
                "y_chn_wri": false,
                "y_mat_num": false,
                "y_mat_clk": false
            },
            "2026-02-01": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_num": true,
                "y_mat_clk": true,
                "y_pe_out": true
            },
            "2026-02-02": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_num": true,
                "y_mat_clk": true
            },
            "2026-02-04": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_num": true,
                "y_mat_clk": true
            },
            "2026-02-05": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_clk": true,
                "y_mat_num": true
            },
            "2026-02-06": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_clk": true,
                "y_mat_num": true
            },
            "2026-02-07": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_num": true,
                "y_mat_clk": true
            },
            "2026-02-08": {
                "y_chn_read": true,
                "y_chn_rec": true,
                "y_chn_wri": true,
                "y_mat_clk": true
            }
        },
        "specials": {}
    }
};

    const CONFIG = {
        duoduo: {
            name: '哥哥（多多）', grade: '六年级',
            headerBg: 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=1600&auto=format&fit=crop',
            quote: '书山有路勤为径，学海无涯苦作舟。',
            quoteBg: 'https://images.unsplash.com/photo-1521587760476-6c12a4b040da?q=80&w=1000&auto=format&fit=crop',
            // 蓝色卫衣，黑色头发，中学生形象 (Seed: Arthur)
            img: 'https://api.dicebear.com/7.x/micah/svg?seed=Arthur&backgroundColor=b6e3f4&baseColor=f9c9b6&hair=fonze&hairColor=0f0f0f&shirt=hoodie&shirtColor=3b82f6&mouth=smirk',
            dailySubjects: [
                { id: 'chinese', name: '语文', icon: 'history_edu', color: 'red', tasks: [
                    { id: 'd_chn_read', text: '阅读《汤姆·索亚历险记》', sub: '必做全书阅读', target: 21 },
                    { id: 'd_chn_note', text: '读书笔记 (摘抄+心得)', sub: '共需15次', target: 15 },
                    { id: 'd_chn_recite', text: '背诵预习 (闯关表)', sub: '课文/古诗/日积月累', target: 24 }
                ]},
                { id: 'math', name: '数学', icon: 'calculate', color: 'blue', tasks: [
                    { id: 'd_mat_base', text: '基础计算 (4道)', sub: '参考《计算打卡》', target: 21 },
                    { id: 'd_mat_expr', text: '列式计算 (2道)', sub: '参考《列式计算》', target: 17 },
                    { id: 'd_mat_rev', text: '总复习 (1面)', sub: '数与代数/图形', target: 24 },
                ]},
                { id: 'english', name: '英语', icon: 'language', color: 'purple', tasks: [
                    { id: 'd_eng_lis', text: '磨耳朵 (20分钟)', sub: '听录音/朗读/签字', target: 21 },
                    { id: 'd_eng_wri', text: '上册课本读写默', sub: '5词+3句 (批改签字)', target: 21 },
                    { id: 'd_eng_phonics', text: '下册自然拼读记词', sub: '3-5个单词 (默写)', target: 21 },
                    { id: 'd_eng_pre', text: '预习下册课文', sub: '每两天一篇', target: 10 }
                ]},
                { id: 'pe', name: '体育', icon: 'directions_run', color: 'green', tasks: [
                    { id: 'd_pe_run', text: '每日锻炼', sub: '跳绳/卷腹/慢跑', target: 21 }
                ]}
            ],
            specialGroups: [
                { title: '全科合订本', tasks: [
                    { id: 's_wb_full', text: '完成《快乐寒假》(语数英)' }
                ]},
                { title: '语文 · 习作范文摘抄', tasks: [
                    { id: 's_ess_1', text: '摘抄：《家乡的春节》' }, { id: 's_ess_2', text: '摘抄：《汤姆·索亚》梗概' },
                    { id: 's_ess_3', text: '摘抄：《让真情自然流露》' }, { id: 's_ess_4', text: '摘抄：《心愿》' },
                    { id: 's_ess_5', text: '摘抄：《插上科学的翅膀飞》' }, { id: 's_ess_6', text: '摘抄：《难忘小学生活》' },
                    { id: 's_ess_read', text: '写作：《汤姆·索亚》读后感' }
                ]},
                { title: '寒假实践 · 五马闹春', tasks: [
                    { id: 's_act_1', text: '年味：听“年”味故事' }, { id: 's_act_2', text: '语文：诵读/水墨/阅读' },
                    { id: 's_act_3', text: '运动：每日锻炼强体魄' }, { id: 's_act_4', text: '文化：剪窗花/涂色骏马' },
                    { id: 's_act_5', text: '劳动：装扮年节美中乐' }
                ]}
            ]
        },
        yangyang: {
            name: '弟弟（扬扬）', grade: '二年级',
            headerBg: 'https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=1600&auto=format&fit=crop',
            quote: '快乐学习，健康成长，每天进步一点点！',
            quoteBg: 'https://images.unsplash.com/photo-1470252649378-9c29740c9fa8?q=80&w=1000&auto=format&fit=crop',
            // 黄色卫衣，戴圆眼镜，可爱小学生 (Seed: Flynn)
            img: 'https://api.dicebear.com/7.x/micah/svg?seed=Flynn&backgroundColor=d1d4f9&baseColor=f9c9b6&hair=doug&hairColor=4a312c&shirt=hoodie&shirtColor=fcd34d&glasses=round&glassesProbability=100&mouth=laughing',
            dailySubjects: [
                { id: 'chn', name: '语文', icon: 'auto_stories', color: 'red', tasks: [
                    { id: 'y_chn_read', text: '阅读 (30分钟)', sub: '注音童话/寓言', target: 21 },
                    { id: 'y_chn_rec', text: '诵读 (15分钟)', sub: '背古诗/课文', target: 21 },
                    { id: 'y_chn_wri', text: '练字 (1-2页)', sub: '生字/组词', target: 21 }
                ]},
                { id: 'mat', name: '数学', icon: 'schedule', color: 'blue', tasks: [
                    { id: 'y_mat_num', text: '识字与书写', sub: '数字书写/生活识字', target: 21 },
                    { id: 'y_mat_clk', text: '生活数学', sub: '看钟表说时间', target: 21 }
                ]},
                { id: 'pe', name: '体育', icon: 'sports_soccer', color: 'green', tasks: [
                    { id: 'y_pe_out', text: '每日锻炼', sub: '户外活动/跑跳', target: 21 }
                ]}
            ],
            specialGroups: [
                { title: '第一阶段 (1.31-2.14)', tasks: [
                    { id: 'y_ph1_wri', text: '语文：复习上册《写字表》' }, { id: 'y_ph1_clk', text: '数学：学会“认识钟面”' }
                ]},
                { title: '第二阶段 (2.15-3.1)', tasks: [
                    { id: 'y_ph2_pre', text: '语文：预习下册前两单元' }, { id: 'y_ph2_bk', text: '阅读：完成整本课外书' }
                ]}
            ]
        }
    };

    // --- Toast Notification System ---
    function showToast(message, type = 'success') {
        const container = document.getElementById('toast-container');
        const toast = document.createElement('div');
        
        let bgColor = 'bg-slate-800';
        let icon = 'info';
        
        if (type === 'success') { bgColor = 'bg-green-600'; icon = 'check_circle'; }
        if (type === 'error') { bgColor = 'bg-red-500'; icon = 'error'; }
        
        toast.className = `${bgColor} text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3 toast-enter pointer-events-auto`;
        toast.innerHTML = `
            <span class="material-symbols-rounded text-xl">${icon}</span>
            <span class="text-sm font-medium">${message}</span>
        `;
        
        container.appendChild(toast);
        
        // Remove after 3s
        setTimeout(() => {
            toast.classList.remove('toast-enter');
            toast.classList.add('toast-exit');
            toast.addEventListener('animationend', () => toast.remove());
        }, 3000);
    }

    // --- 核心逻辑 ---

    function init() {
        updateTime();
        renderHeader();
        renderAllContent();
        
        // 初始提醒
        showSaveHint();
        setInterval(updateTime, 60000);
    }

    function showSaveHint() {
        const hint = document.getElementById('save-hint');
        const topBtn = document.getElementById('top-save-btn');
        
        // 提示气泡 (移除隐藏类)
        if(hint) {
            hint.classList.remove('opacity-0', 'translate-y-2');
        }
        
        // 按钮脉冲动画
        if(topBtn) topBtn.classList.add('save-pulse');
        
        // Clear existing timeout if any
        if (window.saveHintTimeout) clearTimeout(window.saveHintTimeout);
        window.saveHintTimeout = setTimeout(() => {
            if(hint) hint.classList.add('opacity-0', 'translate-y-2');
            if(topBtn) topBtn.classList.remove('save-pulse');
        }, 3000);
    }

    function switchProfile(p) {
        state.profile = p;
        renderHeader();
        renderAllContent();
        document.getElementById('motivation-text').innerText = CONFIG[p].quote;
        document.getElementById('quote-bg').src = CONFIG[p].quoteBg;
    }

    function renderHeader() {
        const conf = CONFIG[state.profile];
        const header = document.getElementById('app-header');
        header.style.backgroundImage = `url('${conf.headerBg}')`;

        document.getElementById('motivation-text').innerText = conf.quote;
        const quoteBg = document.getElementById('quote-bg');
        quoteBg.style.display = 'block'; 
        document.getElementById('quote-bg-fallback').style.opacity = '0';
        quoteBg.src = conf.quoteBg;

        ['duoduo', 'yangyang'].forEach(key => {
            const btn = document.getElementById(`tab-${key}`);
            const img = document.getElementById(`avatar-${key}`);
            if(img) img.src = CONFIG[key].img;

            if (state.profile === key) {
                btn.className = `relative flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 w-40 justify-start overflow-hidden group bg-white text-slate-900 shadow-lg scale-100 opacity-100 ring-2 ring-white/30`;
            } else {
                btn.className = `relative flex items-center gap-2 px-3 py-2 rounded-xl transition-all duration-300 w-40 justify-start overflow-hidden group text-white/90 hover:bg-white/10 opacity-80 hover:opacity-100`;
            }
        });
    }

    function renderAllContent() {
        const d = new Date(state.date);
        const w = ['周日','周一','周二','周三','周四','周五','周六'][d.getDay()];
        document.getElementById('view-date-display').textContent = `${d.getMonth()+1}月${d.getDate()}日 ${w}`;
        
        renderCalendar();
        renderDailyTasks();
        renderSpecialTasks();
    }

    function toggleDaily(taskId) {
        const p = state.profile;
        const d = state.date;
        if (!state[p].daily[d]) state[p].daily[d] = {};

        const newState = !state[p].daily[d][taskId];
        state[p].daily[d][taskId] = newState;

        const btn = document.getElementById(`btn-${taskId}`);
        const iconBox = document.getElementById(`icon-${taskId}`);
        const text = document.getElementById(`text-${taskId}`);
        const badge = document.getElementById(`badge-${taskId}`);

        if (newState) {
            btn.className = "click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-slate-50 border-slate-200 opacity-70";
            iconBox.className = "w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-green-500 bg-green-500 text-white";
            iconBox.innerHTML = '<span class="material-symbols-rounded text-sm font-bold">check</span>';
            text.className = "text-sm font-bold truncate line-through text-slate-400";
            
            if (typeof confetti === 'function') {
                confetti({ particleCount: 30, spread: 50, origin: { y: 0.6 }, colors: ['#4ade80', '#60a5fa'], disableForReducedMotion: true });
            }
            
            // 触发保存提醒
            showSaveHint();
        } else {
            btn.className = "click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-white border-slate-200 hover:border-blue-400 hover:shadow-sm cursor-pointer";
            iconBox.className = "w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-slate-300 bg-white";
            iconBox.innerHTML = '';
            text.className = "text-sm font-bold truncate text-slate-700";
        }

        if (badge) {
            const count = getTaskCount(p, taskId);
            const target = parseInt(badge.dataset.target);
            badge.innerText = target ? `累计: ${count}/${target}` : `累计: ${count}`;
            
            if (target && count >= target) {
                badge.className = "ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-red-500 text-white shadow-sm";
                badge.innerHTML = `<span class="material-symbols-rounded text-[10px]">emoji_events</span> 已达标: ${count}/${target}`;
            } else {
                badge.className = "ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500";
            }
        }

        updateCalendarDot(d);
        updateProgressBar(p, taskId);
    }

    function getTaskCount(profile, taskId) {
        let c = 0;
        const daily = state[profile].daily;
        for (let k in daily) { if (daily[k][taskId]) c++; }
        return c;
    }

    function renderDailyTasks() {
        const container = document.getElementById('tasks-container');
        const subjects = CONFIG[state.profile].dailySubjects;
        const dailyData = state[state.profile].daily[state.date] || {};

        container.innerHTML = subjects.map(sub => {
            const total = sub.tasks.length;
            const done = sub.tasks.filter(t => dailyData[t.id]).length;
            const pct = (done / total) * 100;
            
            const themeMap = {
                red: { iconBg: 'bg-red-50', iconTxt: 'text-red-600', border: 'border-red-100', bar: 'bg-red-500' },
                blue: { iconBg: 'bg-blue-50', iconTxt: 'text-blue-600', border: 'border-blue-100', bar: 'bg-blue-500' },
                green: { iconBg: 'bg-green-50', iconTxt: 'text-green-600', border: 'border-green-100', bar: 'bg-green-500' },
                purple: { iconBg: 'bg-purple-50', iconTxt: 'text-purple-600', border: 'border-purple-100', bar: 'bg-purple-500' },
            };
            const th = themeMap[sub.color];

            return `
                <div class="bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden mb-4" id="sub-card-${sub.id}">
                    <div class="flex items-stretch">
                        <div class="w-14 ${th.iconBg} ${th.iconTxt} flex flex-col items-center justify-center border-r ${th.border}">
                            <span class="material-symbols-rounded text-2xl mb-1">${sub.icon}</span>
                            <span class="text-xs font-bold writing-vertical-lr tracking-widest">${sub.name}</span>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                ${sub.tasks.map(task => {
                                    const isChecked = !!dailyData[task.id];
                                    const count = getTaskCount(state.profile, task.id);
                                    const isTarget = task.target && count >= task.target;
                                    
                                    const btnClass = isChecked 
                                        ? "click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-slate-50 border-slate-200 opacity-70"
                                        : "click-anim flex flex-col p-3 rounded-xl border transition-all duration-200 select-none relative overflow-hidden bg-white border-slate-200 hover:border-blue-400 hover:shadow-sm cursor-pointer";
                                    
                                    const iconClass = isChecked
                                        ? "w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-green-500 bg-green-500 text-white"
                                        : "w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors flex-shrink-0 border-slate-300 bg-white";
                                    
                                    const txtClass = isChecked ? "text-sm font-bold truncate line-through text-slate-400" : "text-sm font-bold truncate text-slate-700";
                                    
                                    let badgeHtml = "";
                                    if(isTarget) {
                                        badgeHtml = `<span id="badge-${task.id}" data-target="${task.target}" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-red-500 text-white shadow-sm"><span class="material-symbols-rounded text-[10px]">emoji_events</span> 已达标: ${count}/${task.target}</span>`;
                                    } else {
                                        badgeHtml = `<span id="badge-${task.id}" data-target="${task.target}" class="ml-auto text-[10px] px-2 py-0.5 rounded-full font-medium flex items-center gap-1 transition-all duration-300 bg-slate-100 text-slate-500">累计: ${count}/${task.target}</span>`;
                                    }

                                    return `
                                    <div id="btn-${task.id}" onclick="toggleDaily('${task.id}')" class="${btnClass}">
                                        <div class="flex items-center gap-3 mb-1">
                                            <div id="icon-${task.id}" class="${iconClass}">
                                                ${isChecked ? '<span class="material-symbols-rounded text-sm font-bold">check</span>' : ''}
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <div id="text-${task.id}" class="${txtClass}">${task.text}</div>
                                            </div>
                                        </div>
                                        <div class="flex items-center justify-between pl-9 mt-1">
                                            <span class="text-[10px] text-slate-400 truncate max-w-[50%]">${task.sub}</span>
                                            ${badgeHtml}
                                        </div>
                                    </div>`;
                                }).join('')}
                            </div>
                        </div>
                    </div>
                    <div class="h-1 w-full bg-slate-100">
                        <div id="bar-${sub.id}" class="h-full ${th.bar} transition-all duration-500 ease-out" style="width: ${pct}%"></div>
                    </div>
                </div>`;
        }).join('');
    }

    function updateProgressBar(profile, taskId) {
        const subjects = CONFIG[profile].dailySubjects;
        const sub = subjects.find(s => s.tasks.some(t => t.id === taskId));
        if (!sub) return;

        const dailyData = state[profile].daily[state.date] || {};
        const total = sub.tasks.length;
        const done = sub.tasks.filter(t => dailyData[t.id]).length;
        const pct = (done / total) * 100;
        
        const bar = document.getElementById(`bar-${sub.id}`);
        if(bar) bar.style.width = `${pct}%`;
    }

    function renderSpecialTasks() {
        const container = document.getElementById('special-tasks-container');
        const groups = CONFIG[state.profile].specialGroups;
        const data = state[state.profile].specials;
        let doneCount = 0;
        let totalCount = 0;

        const html = groups.map(g => {
            return `
            <div class="mb-4">
                <h4 class="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-1">${g.title}</h4>
                <div class="bg-white rounded-xl border border-slate-100 p-1 space-y-1">
                    ${g.tasks.map(t => {
                        totalCount++;
                        const isC = !!data[t.id];
                        if(isC) doneCount++;
                        return `
                        <div onclick="toggleSpecial('${t.id}')" class="flex items-center p-2 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors">
                            <div class="w-5 h-5 rounded border flex-shrink-0 flex items-center justify-center mr-3 ${isC ? 'bg-orange-500 border-orange-500 text-white' : 'border-slate-300 bg-white'}">
                                ${isC ? '<span class="material-symbols-rounded text-xs font-bold">check</span>' : ''}
                            </div>
                            <span class="text-sm ${isC ? 'text-slate-400 line-through' : 'text-slate-700'}">${t.text}</span>
                        </div>`;
                    }).join('')}
                </div>
            </div>`;
        }).join('');

        container.innerHTML = html;
        document.getElementById('challenge-progress-text').textContent = `${doneCount}/${totalCount}`;
    }

    function toggleSpecial(tid) {
        const p = state.profile;
        state[p].specials[tid] = !state[p].specials[tid];
        renderSpecialTasks();
        
        // 触发保存提醒
        if (state[p].specials[tid]) {
             showSaveHint();
        }
    }

    function renderCalendar() {
        const container = document.getElementById('calendar-strip');
        container.innerHTML = '';
        const start = new Date('2026-01-31');
        const end = new Date('2026-03-02');
        let curr = new Date(start);
        
        while (curr <= end) {
            const dStr = curr.toISOString().split('T')[0];
            const btn = document.createElement('button');
            btn.id = `cal-${dStr}`;
            btn.className = getCalendarClass(dStr);
            btn.innerHTML = getCalendarInnerHtml(dStr, curr);
            btn.onclick = () => { state.date = dStr; renderAllContent(); };
            container.appendChild(btn);
            
            if (dStr === state.date) {
                setTimeout(() => btn.scrollIntoView({behavior:'smooth', inline:'center', block:'nearest'}), 50);
            }
            curr.setDate(curr.getDate() + 1);
        }
    }

    function getCalendarClass(dStr) {
        const isSel = dStr === state.date;
        const status = getDayStatus(dStr);
        let base = "flex-shrink-0 w-12 h-14 rounded-xl flex flex-col items-center justify-center border transition-all duration-300 ";
        
        if (status === 'full') base += "bg-green-50 border-green-200 text-green-700 ";
        else if (status === 'part') base += "bg-orange-50 border-orange-200 text-orange-700 ";
        else base += "bg-white border-slate-100 text-slate-400 ";

        if (isSel) base += "ring-2 ring-blue-400 ring-offset-1 scale-105 z-10 shadow-md font-bold";
        else base += "opacity-80 hover:opacity-100 hover:scale-105";
        
        return base;
    }

    function getCalendarInnerHtml(dStr, dateObj) {
        const status = getDayStatus(dStr);
        let dot = "";
        if (status === 'full') dot = `<div class="w-1.5 h-1.5 rounded-full bg-green-500 mt-1"></div>`;
        else if (status === 'part') dot = `<div class="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1"></div>`;
        
        return `<span class="text-[10px] leading-none">${dateObj.getMonth()+1}.${dateObj.getDate()}</span>${dot}`;
    }

    function getDayStatus(dStr) {
        const dayData = state[state.profile].daily[dStr];
        if (!dayData) return 'none';
        
        const subjects = CONFIG[state.profile].dailySubjects;
        let total = 0, done = 0;
        subjects.forEach(s => {
            total += s.tasks.length;
            s.tasks.forEach(t => { if(dayData[t.id]) done++; });
        });
        
        if (done === 0) return 'none';
        return done >= total ? 'full' : 'part';
    }

    function updateCalendarDot(dStr) {
        const btn = document.getElementById(`cal-${dStr}`);
        if(btn) {
            btn.className = getCalendarClass(dStr);
            const dateObj = new Date(dStr); 
            btn.innerHTML = getCalendarInnerHtml(dStr, dateObj); 
        }
    }

    function updateTime() {
        const now = new Date();
        const m = now.getMonth() + 1;
        const d = now.getDate();
        const w = ['周日','周一','周二','周三','周四','周五','周六'][now.getDay()];
        document.getElementById('current-date-display').textContent = `${m}月${d}日 ${w}`;
        
        const start = new Date('2026-03-02');
        const diff = Math.ceil((start - now) / (86400000));
        document.getElementById('days-left').innerText = diff > 0 ? diff : 0;
    }

    function changeDate(delta) {
        const d = new Date(state.date);
        d.setDate(d.getDate() + delta);
        state.date = d.toISOString().split('T')[0];
        renderAllContent();
    }

    // 全屏逻辑 (重做版)
    function toggleFullScreen() {
        const body = document.body;
        const icon = document.getElementById('fs-icon');
        const isFullscreen = body.classList.contains('force-fullscreen-active');
        
        if (!isFullscreen) {
            body.classList.add('force-fullscreen-active');
            icon.innerText = "close_fullscreen";
            showToast("已进入专注模式", "success");
        } else {
            body.classList.remove('force-fullscreen-active');
            icon.innerText = "fullscreen";
            showToast("已退出专注模式", "info");
        }
    }

    // 存档系统
    function triggerLoad() { document.getElementById('file-input').click(); }
    
    function handleFileLoad(event) {
        const file = event.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            const match = e.target.result.match(/let state = (\{[\s\S]*?\});/);
            if (match) {
                try {
                    state = JSON.parse(match[1]);
                    state.date = new Date().toISOString().split('T')[0]; // 回到今天
                    switchProfile(state.profile);
                    showToast("✅ 存档读取成功！", "success");
                } catch(err) { showToast("❌ 存档损坏或格式错误", "error"); }
            } else { showToast("❌ 无效的存档文件", "error"); }
            event.target.value = '';
        };
        reader.readAsText(file);
    }

    function downloadProgress() {
        const html = document.documentElement.outerHTML;
        const newStateStr = `let state = ${JSON.stringify(state, null, 4)};`;
        const newHtml = html.replace(/let state = \{[\s\S]*?\};/, newStateStr);
        
        const blob = new Blob([newHtml], {type: 'text/html'});
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        
        const now = new Date();
        const dateStr = `${(now.getMonth()+1).toString().padStart(2,'0')}月${now.getDate().toString().padStart(2,'0')}日`;
        const timeStr = `${now.getHours().toString().padStart(2,'0')}点${now.getMinutes().toString().padStart(2,'0')}分`;
        const name = state.profile === 'duoduo' ? '哥哥' : '弟弟';
        
        a.href = url;
        a.download = `${name}_寒假作业_${dateStr}_${timeStr}.html`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        showToast("已生成存档文件，请妥善保存！", "success");
    }

    // 启动
    init();

</script>

</body></html>
